<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Adding a Structure" href="adding-structure.html" /><link rel="prev" title="Creating a Simple Addon" href="creating-simple-addon.html" />

    <link rel="shortcut icon" href="../../_static/favicon.ico"/><meta name="generator" content="sphinx-4.3.2, furo 2021.11.23"/>
        <title>Listening for an Event - Terra Docs</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?digest=7f0192ddeb2adecfbaa87ffbcf67d16358b30bc1" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?digest=0af69da206d614734f649b27d4cdc2dd6c31f41d" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/rounded-borders.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/cards.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/code-blocks.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/interpreted-text.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/padding.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/headings.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/admonitions.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/logo.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/content.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/lists.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/text-colors.css" />
    
    


<style>
  body {
    --color-code-background: #232629;
  --color-code-foreground: #cccccc;
  --color-admonition-title--important: #ff9100;
  --color-admonition-title-background--important: rgba(255,145,0,.1);
  --color-foreground-primary: #000000;
  --color-foreground-secondary: #333333;
  --font-stack: -apple-system, BlinkMacSystemFont, Segoe UI, Cantarell, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;
  --admonition-font-size: 1rem;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #232629;
  --color-code-foreground: #cccccc;
  --color-foreground-primary: #ffffff;
  --color-foreground-secondary: #dbdbdb;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #232629;
  --color-code-foreground: #cccccc;
  --color-foreground-primary: #ffffff;
  --color-foreground-secondary: #dbdbdb;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Terra Docs</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../_static/terra-logo.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Terra Docs</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../install/index.html">Getting Started</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../install/fabric.html">Fabric Installation</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../install/mod-client-world-creation.html">Fabric, Forge and Quilt Client World Creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../install/mod-server-world-creation.html">Fabric, Forge and Quilt Server World Creation</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../install/forge.html">Forge Installation</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../install/mod-client-world-creation.html">Fabric, Forge and Quilt Client World Creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../install/mod-server-world-creation.html">Fabric, Forge and Quilt Server World Creation</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../install/quilt.html">Quilt Installation</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../install/mod-client-world-creation.html">Fabric, Forge and Quilt Client World Creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../install/mod-server-world-creation.html">Fabric, Forge and Quilt Server World Creation</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../install/bukkit.html">Bukkit Installation</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../install/bukkit-server-world-creation.html">Bukkit World Creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../install/worldmanager-bukkit-world-creation.html">Worldmanager World Creation</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../install/versions.html">Versions</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../install/versions/legacy/bukkit/5.3.3.html">Bukkit Legacy 5.3.3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../install/versions/legacy/bukkit/5.4.1.html">Bukkit Legacy 5.4.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../install/versions/legacy/fabric/5.3.3.html">Fabric Legacy 5.3.3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../install/versions/legacy/fabric/5.4.1.html">Fabric Legacy 5.4.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../install/versions/legacy/forge/5.3.3.html">Forge Legacy 5.3.3</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contact.html">Contact &amp; Support</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../config/index.html">Config Packs</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../config/community-packs.html">Community Packs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../config/pack-installation.html">Pack Installation</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../config/development/index.html">Config Development</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../config/development/introduction.html">Config Development Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/development/config-files.html">Config Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/development/config-data.html">Defining Data in Configs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/development/config-system.html">The Config System</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/development/pack-from-scratch/index.html">Creating a Pack from Scratch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/development/modifying-existing-pack.html">Modifying an Existing Pack</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/development/samplers/index.html">Samplers &amp; Noise</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../config/documentation/index.html">Config Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../config/documentation/sampler/index.html">Sampler Configuration</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../config/documentation/image/index.html">Image Configuration</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../config/documentation/image/color-sampler.html">Color Sampler Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../config/documentation/image/image.html">Image Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../config/documentation/image/noise-samplers.html">Image Noise Sampler Configurations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../config/documentation/image/image-biome-provider-v2.html">Image Biome Provider Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../config/documentation/image/pipeline-image-source.html">Pipeline Image Source Configuration</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Terra API</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">Introduction to the Terra API</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="loading.html">Terra Addon Loading</a></li>
<li class="toctree-l3"><a class="reference internal" href="development-environment.html">Setting up a Development Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="creating-simple-addon.html">Creating a Simple Addon</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Listening for an Event</a></li>
<li class="toctree-l3"><a class="reference internal" href="adding-structure.html">Adding a Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="registering-config-type.html">Registering a Config Type</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../concepts/index.html">API Concepts</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/manifest-addons.html">Manifest Addons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/dependency-injection.html">Dependency Injection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/logging.html">Logging With SLF4J</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/events.html">Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/type-key.html">Type Keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/registries.html">Registries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/tectonic.html">Tectonic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/cloud.html">Registering Commands with Cloud</a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="listening-for-an-event">
<h1>Listening for an Event<a class="headerlink" href="#listening-for-an-event" title="Permalink to this headline">¶</a></h1>
<p>Listening for <a class="reference internal" href="../concepts/events.html"><span class="doc">Events</span></a> is essential for interfacing with the Terra API.</p>
<section id="configpackpreloadevent">
<h2>ConfigPackPreLoadEvent<a class="headerlink" href="#configpackpreloadevent" title="Permalink to this headline">¶</a></h2>
<p>In this tutorial, we’ll be listening for <a class="reference external" href="https://ci.codemc.io/job/PolyhedralDev/job/Terra/javadoc/com/dfsek/terra/api/event/events/config/pack/ConfigPackPreLoadEvent.html">ConfigPackPreLoadEvent</a>. As the name suggests, this event
is fired before the configuration files in a config pack are loaded. Addons may listen to this event to</p>
<ul class="simple">
<li><p>Register config loaders</p></li>
<li><p>Register config types</p></li>
<li><p>Register objects</p></li>
</ul>
<p>For now, we’ll just log a message to the console when the event is fired.</p>
</section>
<section id="listening-for-the-event">
<h2>Listening for the Event<a class="headerlink" href="#listening-for-the-event" title="Permalink to this headline">¶</a></h2>
<p>To listen for the event, we’ll be using the <a class="reference external" href="https://ci.codemc.io/job/PolyhedralDev/job/Terra/javadoc/com/dfsek/terra/api/event/functional/FunctionalEventHandler.html">FunctionalEventHandler</a> API. To learn more about the Functional
Event Handler, read about it <a class="reference internal" href="../concepts/events.html#functional-event-handler"><span class="std std-ref">here</span></a>.</p>
<section id="injecting-the-required-objects">
<h3>Injecting the Required Objects<a class="headerlink" href="#injecting-the-required-objects" title="Permalink to this headline">¶</a></h3>
<p>To access the <a class="reference external" href="https://ci.codemc.io/job/PolyhedralDev/job/Terra/javadoc/com/dfsek/terra/api/event/EventManager.html">EventManager</a>, which we’ll use to access the Functional Event Handler, we need a
<a class="reference external" href="https://ci.codemc.io/job/PolyhedralDev/job/Terra/javadoc/com/dfsek/terra/api/Platform.html">Platform</a> instance. We’ll also need our <a class="reference external" href="https://ci.codemc.io/job/PolyhedralDev/job/Terra/javadoc/com/dfsek/terra/api/addon/BaseAddon.html">BaseAddon</a> instance later, so let’s inject that too:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Inject</span>
<span class="kd">private</span> <span class="n">Platform</span> <span class="n">platform</span><span class="p">;</span>

<span class="nd">@Inject</span>
<span class="kd">private</span> <span class="n">BaseAddon</span> <span class="n">addon</span><span class="p">;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you need a refresher on dependency injection, you can read about it
<a class="reference internal" href="../concepts/dependency-injection.html"><span class="doc">here</span></a></p>
</div>
</section>
<section id="creating-an-event-context">
<h3>Creating an Event Context<a class="headerlink" href="#creating-an-event-context" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="https://ci.codemc.io/job/PolyhedralDev/job/Terra/javadoc/com/dfsek/terra/api/event/functional/EventContext.html">EventContext</a> is used for defining a handler for an event. The event context is a builder-like object
that you can use to configure properties of your handler. Let’s create an event context for ConfigPackPreLoadEvent:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">platform</span><span class="p">.</span><span class="na">getEventManager</span><span class="p">()</span>
        <span class="p">.</span><span class="na">getHandler</span><span class="p">(</span><span class="n">FunctionalEventHandler</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
        <span class="p">.</span><span class="na">register</span><span class="p">(</span><span class="n">addon</span><span class="p">,</span> <span class="n">ConfigPackPreLoadEvent</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
        <span class="p">.</span><span class="na">then</span><span class="p">(</span><span class="n">event</span> <span class="o">-&gt;</span> <span class="p">{</span>
            <span class="n">logger</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">"We're loading a config pack!"</span><span class="p">);</span>
        <span class="p">});</span>
</pre></div>
</div>
<p>If you recompile and install your addon again, you’ll see that… nothing happens.</p>
</section>
</section>
<section id="event-scope">
<h2>Event Scope<a class="headerlink" href="#event-scope" title="Permalink to this headline">¶</a></h2>
<p>Some events in Terra have <em>scope</em>. This means that they are only fired to addons that meet certain conditions.
<a class="reference external" href="https://ci.codemc.io/job/PolyhedralDev/job/Terra/javadoc/com/dfsek/terra/api/event/events/config/pack/ConfigPackPreLoadEvent.html">ConfigPackPreLoadEvent</a> is one of these events.</p>
<section id="pack-events">
<h3>Pack Events<a class="headerlink" href="#pack-events" title="Permalink to this headline">¶</a></h3>
<p>If you look at the class hierarchy of ConfigPackPreLoadEvent, you’ll see it implements the <a class="reference external" href="https://ci.codemc.io/job/PolyhedralDev/job/Terra/javadoc/com/dfsek/terra/api/event/events/PackEvent.html">PackEvent</a>
interface. All events that implement this interface are <em>pack scoped</em>. This means that their handlers are only
fired if the addon that registered the handler is a dependency of the config pack.</p>
<p>So, how do you get your event handler to fire?</p>
</section>
<section id="pack-dependencies">
<h3>Pack Dependencies<a class="headerlink" href="#pack-dependencies" title="Permalink to this headline">¶</a></h3>
<p>In the pack manifest (<code class="docutils literal notranslate"><span class="pre">pack.yml</span></code>) is an <code class="docutils literal notranslate"><span class="pre">addons</span></code> key. These addons are dependencies of the config pack. To recieve
events fired by this pack, simply add your addon and a version range to this map. Go ahead and modify the default pack
to add your addon as a dependency:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">addons</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">biome-provider-pipeline</span><span class="p">:</span><span class="w"> </span><span class="s">"0.1.+"</span><span class="w"></span>
<span class="w">  </span><span class="nt">biome-provider-single</span><span class="p">:</span><span class="w"> </span><span class="s">"0.1.+"</span><span class="w"></span>
<span class="w">  </span><span class="nt">chunk-generator-noise-3d</span><span class="p">:</span><span class="w"> </span><span class="s">"0.1.+"</span><span class="w"></span>
<span class="w">  </span><span class="nt">config-biome</span><span class="p">:</span><span class="w"> </span><span class="s">"0.1.+"</span><span class="w"></span>
<span class="w">  </span><span class="nt">config-flora</span><span class="p">:</span><span class="w"> </span><span class="s">"0.1.+"</span><span class="w"></span>
<span class="w">  </span><span class="nt">config-noise-function</span><span class="p">:</span><span class="w"> </span><span class="s">"0.1.+"</span><span class="w"></span>
<span class="w">  </span><span class="nt">config-ore</span><span class="p">:</span><span class="w"> </span><span class="s">"0.1.+"</span><span class="w"></span>
<span class="w">  </span><span class="nt">config-palette</span><span class="p">:</span><span class="w"> </span><span class="s">"0.1.+"</span><span class="w"></span>
<span class="w">  </span><span class="nt">config-distributors</span><span class="p">:</span><span class="w"> </span><span class="s">"0.1.+"</span><span class="w"></span>
<span class="w">  </span><span class="nt">config-locators</span><span class="p">:</span><span class="w"> </span><span class="s">"0.1.+"</span><span class="w"></span>
<span class="w">  </span><span class="nt">config-feature</span><span class="p">:</span><span class="w"> </span><span class="s">"0.1.+"</span><span class="w"></span>
<span class="w">  </span><span class="nt">structure-terrascript-loader</span><span class="p">:</span><span class="w"> </span><span class="s">"0.1.+"</span><span class="w"></span>
<span class="w">  </span><span class="nt">structure-sponge-loader</span><span class="p">:</span><span class="w"> </span><span class="s">"0.1.+"</span><span class="w"></span>
<span class="w">  </span><span class="nt">language-yaml</span><span class="p">:</span><span class="w"> </span><span class="s">"0.1.+"</span><span class="w"></span>
<span class="w">  </span><span class="nt">generation-stage-feature</span><span class="p">:</span><span class="w"> </span><span class="s">"0.1.+"</span><span class="w"></span>
<span class="w">  </span><span class="nt">structure-function-check-noise-3d</span><span class="p">:</span><span class="w"> </span><span class="s">"0.1.+"</span><span class="w"></span>
<span class="w">  </span><span class="nt">palette-block-shortcut</span><span class="p">:</span><span class="w"> </span><span class="s">"0.1.+"</span><span class="w"></span>
<span class="w">  </span><span class="nt">example-addon</span><span class="p">:</span><span class="w"> </span><span class="s">"0.1.+"</span><span class="w"> </span><span class="c1"># Our example addon! (Change the ID and version to match yours)</span><span class="w"></span>
</pre></div>
</div>
<p>Now when you run with your addon again, you should see a message logged to the console with the pack ID when the pack
loads!</p>
<img alt="../../_images/init1.png" src="../../_images/init1.png"/>
</section>
<section id="global-event-handlers">
<h3>Global Event Handlers<a class="headerlink" href="#global-event-handlers" title="Permalink to this headline">¶</a></h3>
<p>Another way is to mark your event handler as <em>global</em>. Using the <a class="reference external" href="https://ci.codemc.io/job/PolyhedralDev/job/Terra/javadoc/com/dfsek/terra/api/event/functional/EventContext.html#--">EventContext#global</a> method, you can
eliminate the pack scope from your event handler. This will cause your handler to be fired regardless of whether
the pack that fired it depends on your addon. Marking the handler as global would look like this:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">platform</span><span class="p">.</span><span class="na">getEventManager</span><span class="p">()</span>
        <span class="p">.</span><span class="na">getHandler</span><span class="p">(</span><span class="n">FunctionalEventHandler</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
        <span class="p">.</span><span class="na">register</span><span class="p">(</span><span class="n">addon</span><span class="p">,</span> <span class="n">ConfigPackPreLoadEvent</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
        <span class="p">.</span><span class="na">then</span><span class="p">(</span><span class="n">event</span> <span class="o">-&gt;</span> <span class="p">{</span>
            <span class="n">logger</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">"We're loading a config pack!"</span><span class="p">);</span>
        <span class="p">})</span>
        <span class="p">.</span><span class="na">global</span><span class="p">();</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is generally a bad idea to mark handlers for scoped events as global! By marking a handler as global, you may
introduce unexpected behavior, as it is expected that events only reach addons that are dependencies of the event
source.</p>
</div>
</section>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<p>You now have a pack-scoped event listener in your addon, which logs when the <a class="reference external" href="https://ci.codemc.io/job/PolyhedralDev/job/Terra/javadoc/com/dfsek/terra/api/event/events/config/pack/ConfigPackPreLoadEvent.html">ConfigPackPreLoadEvent</a> is
fired. Continue to learn how to register objects!</p>
<p>Our example addon at this stage looks like this:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.addon</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.dfsek.terra.addons.manifest.api.AddonInitializer</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.dfsek.terra.api.Platform</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.dfsek.terra.api.addon.BaseAddon</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.dfsek.terra.api.event.events.config.pack.ConfigPackPreLoadEvent</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.dfsek.terra.api.event.functional.FunctionalEventHandler</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.dfsek.terra.api.inject.annotations.Inject</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.slf4j.Logger</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExampleEntryPoint</span> <span class="kd">implements</span> <span class="n">AddonInitializer</span> <span class="p">{</span>
    <span class="nd">@Inject</span>
    <span class="kd">private</span> <span class="n">Logger</span> <span class="n">logger</span><span class="p">;</span>

    <span class="nd">@Inject</span>
    <span class="kd">private</span> <span class="n">Platform</span> <span class="n">platform</span><span class="p">;</span>

    <span class="nd">@Inject</span>
    <span class="kd">private</span> <span class="n">BaseAddon</span> <span class="n">addon</span><span class="p">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">logger</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">"Hello, World!"</span><span class="p">);</span>

        <span class="n">platform</span><span class="p">.</span><span class="na">getEventManager</span><span class="p">()</span>
                <span class="p">.</span><span class="na">getHandler</span><span class="p">(</span><span class="n">FunctionalEventHandler</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
                <span class="p">.</span><span class="na">register</span><span class="p">(</span><span class="n">addon</span><span class="p">,</span> <span class="n">ConfigPackPreLoadEvent</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
                <span class="p">.</span><span class="na">then</span><span class="p">(</span><span class="n">event</span> <span class="o">-&gt;</span> <span class="p">{</span>
                    <span class="n">logger</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">"We're loading a config pack!"</span><span class="p">);</span>
                <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="adding-structure.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Adding a Structure</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="creating-simple-addon.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Creating a Simple Addon</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, Terra Contributors |
          Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
          <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            | <a class="muted-link" href="../../_sources/api/intro/listening-for-an-event.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Listening for an Event</a><ul>
<li><a class="reference internal" href="#configpackpreloadevent">ConfigPackPreLoadEvent</a></li>
<li><a class="reference internal" href="#listening-for-the-event">Listening for the Event</a><ul>
<li><a class="reference internal" href="#injecting-the-required-objects">Injecting the Required Objects</a></li>
<li><a class="reference internal" href="#creating-an-event-context">Creating an Event Context</a></li>
</ul>
</li>
<li><a class="reference internal" href="#event-scope">Event Scope</a><ul>
<li><a class="reference internal" href="#pack-events">Pack Events</a></li>
<li><a class="reference internal" href="#pack-dependencies">Pack Dependencies</a></li>
<li><a class="reference internal" href="#global-event-handlers">Global Event Handlers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/scripts/furo.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    </body>
</html>